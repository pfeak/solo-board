/**
 * 界面文案：英文（默认）与中文。key 与 en 一致，zh 为中文翻译。
 */
export const messages = {
  en: {
    // Sidebar
    'sidebar.workspace': 'Workspace',
    'sidebar.profile': 'Profile',
    'sidebar.preferences': 'Preferences',
    'sidebar.logout': 'Log out',
    'sidebar.logoutSuccess': 'Logged out',
    'sidebar.logoutFailed': 'Log out failed',
    // MainLayout
    'mainLayout.openSidebar': 'Open sidebar',
    'mainLayout.sidebarTitle': 'Sidebar',
    'mainLayout.toggleSidebar': 'Toggle sidebar',
    'mainLayout.sidebarShortcut': 'Ctrl+B',
    // Login
    'login.title': 'Solo-Board Login',
    'login.username': 'Username',
    'login.password': 'Password',
    'login.placeholderUsername': 'Enter username',
    'login.placeholderPassword': 'Enter password',
    'login.submit': 'Log in',
    'login.submitting': 'Logging in...',
    'login.errorAuth': 'Invalid username or password',
    'login.poweredByPrefix': 'powered by ',
    'login.poweredByLink': 'solo-board',
    'login.validationUsername': 'Please enter username',
    'login.validationPassword': 'Please enter password',
    // Change password (first time)
    'changePassword.title': 'Change Password',
    'changePassword.subtitle': 'You must change your password on first login',
    'changePassword.currentPassword': 'Current password',
    'changePassword.newPassword': 'New password',
    'changePassword.confirmPassword': 'Confirm new password',
    'changePassword.placeholderCurrent': 'Enter current password',
    'changePassword.placeholderNew': 'At least 8 characters, letters and numbers',
    'changePassword.placeholderConfirm': 'Enter new password again',
    'changePassword.submit': 'Change password',
    'changePassword.submitting': 'Changing...',
    'changePassword.success': 'Password changed successfully',
    'changePassword.fail': 'Failed. Please try again.',
    'changePassword.validationCurrent': 'Please enter current password',
    'changePassword.validationNew': 'Please enter new password',
    'changePassword.validationNewLength': 'At least 8 characters',
    'changePassword.validationNewFormat': 'Must contain letters and numbers',
    'changePassword.validationConfirm': 'Please enter confirm password',
    'changePassword.validationMismatch': 'Confirm password does not match',
    // Profile
    'profile.title': 'Profile',
    'profile.personalInfo': 'Personal info',
    'profile.viewAccount': 'View your account info',
    'profile.username': 'Username',
    'profile.createdAt': 'Created at',
    'profile.lastLogin': 'Last login',
    'profile.changePassword': 'Change password',
    'profile.changePasswordDesc': 'Change your login password',
    'profile.currentPassword': 'Current password',
    'profile.newPassword': 'New password',
    'profile.confirmPassword': 'Confirm new password',
    'profile.placeholderCurrent': 'Enter current password',
    'profile.placeholderNew': 'At least 8 characters, letters and numbers',
    'profile.placeholderConfirm': 'Enter new password again',
    'profile.submitPassword': 'Change password',
    'profile.submittingPassword': 'Changing...',
    'profile.loadUserError': 'Failed to load user info',
    'profile.refreshHint': 'Please refresh and try again',
    'profile.validationCurrent': 'Please enter current password',
    'profile.validationNew': 'Please enter new password',
    'profile.validationNewLength': 'At least 8 characters',
    'profile.validationNewFormat': 'Must contain letters and numbers',
    'profile.validationConfirm': 'Please enter confirm password',
    'profile.validationMismatch': 'Confirm password does not match',
    // Preferences
    'preferences.title': 'Preferences',
    'preferences.firstTimeHint': 'Please choose your language. You can change it later in Preferences.',
    'preferences.language': 'Language',
    'preferences.languageDesc': 'Choose interface language. Default is English.',
    'preferences.currentLanguage': 'Current language',
    'preferences.selectLanguage': 'Select language',
    'preferences.english': 'English',
    'preferences.chinese': 'Chinese',
    'preferences.saved': 'Language preference saved',
    'preferences.saveFailed': 'Failed to save preferences',
    // Home (file browser)
    'home.workspace': 'Workspace',
    'home.loading': 'Loading...',
    'home.new': 'New',
    'home.newFolder': 'New folder',
    'home.newBoard': 'New board',
    'home.name': 'Name',
    'home.type': 'Type',
    'home.modified': 'Modified',
    'home.actions': 'Actions',
    'home.open': 'Open',
    'home.rename': 'Rename',
    'home.move': 'Move',
    'home.delete': 'Delete',
    'home.selectFolder': 'Select folder',
    'home.noFiles': 'No files in this folder',
    'home.noFolderSelected': 'Select a folder to view files',
    'home.createFolder': 'New folder',
    'home.createFile': 'New board',
    'home.folderName': 'Folder name',
    'home.fileName': 'Board name',
    'home.boardName': 'Board name',
    'home.placeholderFolderName': 'Enter folder name',
    'home.placeholderFileName': 'Enter board name',
    'home.placeholderBoardName': 'Enter board name',
    'home.placeholderName': 'Enter name',
    'home.targetFolder': 'Target folder',
    'home.create': 'Create',
    'home.cancel': 'Cancel',
    'home.confirm': 'Confirm',
    'home.renameFolder': 'Rename folder',
    'home.renameFile': 'Rename file',
    'home.moveFolder': 'Move folder',
    'home.moveFile': 'Move file',
    'home.deleteConfirm': 'Confirm delete',
    'home.deleteFolderConfirm': 'Delete folder "{name}"? This cannot be undone.',
    'home.deleteFileConfirm': 'Delete file "{name}"? This cannot be undone.',
    'home.createFolderDesc': 'Create a new folder under root',
    'home.createFileDesc': 'Board must be created inside a folder',
    'home.renameDesc': 'Enter new name',
    'home.moveDesc': 'Select target folder',
    'home.moveFolderToRoot': 'Move folder to root (one level only)',
    'home.folderActions': 'Folder actions',
    'home.validationFolderNameEmpty': 'Folder name cannot be empty',
    'home.validationFileNameEmpty': 'File name cannot be empty',
    'home.validationSelectFolder': 'Please select a folder',
    'home.validationSelectTarget': 'Please select target folder',
    'home.loadFailed': 'Load failed',
    'home.createSuccess': 'Created successfully',
    'home.createFailed': 'Create failed',
    'home.deleteSuccess': 'Deleted successfully',
    'home.deleteFailed': 'Delete failed',
    'home.renameSuccess': 'Renamed successfully',
    'home.renameFailed': 'Rename failed',
    'home.moveSuccess': 'Moved successfully',
    'home.moveFailed': 'Move failed',
    'home.boardType': 'Board',
    'home.byCreator': 'by {creator}',
    'home.optionSelectFolder': 'Select folder',
    'home.import': 'Import',
    'home.importDesc': 'Import .excalidraw file into current folder',
    'home.importSuccess': 'Imported successfully',
    'home.importFailed': 'Import failed',
    'home.importInvalidFile': 'Please select a valid .excalidraw file',
    'home.importSelectFolder': 'Please select a folder first',
    'home.justNow': 'just now',
    'home.minuteAgo': '1 minute ago',
    'home.minutesAgo': '{n} minutes ago',
    'home.hourAgo': '1 hour ago',
    'home.hoursAgo': '{n} hours ago',
    'home.dayAgo': '1 day ago',
    'home.daysAgo': '{n} days ago',
    'home.monthAgo': '1 month ago',
    'home.monthsAgo': '{n} months ago',
    'home.yearAgo': '1 year ago',
    'home.yearsAgo': '{n} years ago',
    // Editor
    'editor.back': 'Back',
    'editor.save': 'Save',
    'editor.saving': 'Saving...',
    'editor.autoSaving': 'Auto-saving...',
    'editor.unsaved': 'Unsaved',
    'editor.savedAt': 'Saved ({time})',
    'editor.fileNotFound': 'File not found',
    'editor.loadFailed': 'Load failed',
    'editor.saveSuccess': 'Saved successfully',
    'editor.saveFailed': 'Save failed',
    'editor.autoSaveFailed': 'Auto-save failed',
    'editor.leaveTitle': 'Leave without saving?',
    'editor.leaveMessage': 'You have unsaved changes. Leave anyway?',
    'editor.leave': 'Leave',
    'editor.noChanges': 'No unsaved changes',
    'editor.untitled': 'Untitled',
    'editor.loading': 'Loading...',
    'editor.otherBoards': 'Other boards in this folder',
    'editor.noOtherBoards': 'No other boards in this folder',
    // Error boundary
    'errorBoundary.title': 'Something went wrong',
    'errorBoundary.description': 'An error occurred while rendering this page.',
    'errorBoundary.hint': 'Try refreshing the page or going back.',
    'errorBoundary.retry': 'Retry',
    'errorBoundary.backHome': 'Back to workspace',
    // API / network errors (used when backend returns no detail or we map by code)
    'api.networkError': 'Network error. Please try again later.',
    'api.unauthorized': 'Unauthenticated',
    'api.badRequest': 'Invalid request',
    'api.forbidden': 'Permission denied',
    'api.notFound': 'Resource not found',
    'api.serverError': 'Server error. Please try again later.',
    'api.requestFailed': 'Request failed. Please try again.',
    'api.conflictFolder': 'A folder with the same name already exists',
    'api.conflictFile': 'A file with the same name already exists',
    'api.folderNotEmpty': 'Folder is not empty and cannot be deleted',
    'api.folderNameEmpty': 'Folder name cannot be empty',
    'api.fileNameEmpty': 'File name cannot be empty',
    'api.oneLevelOnly': 'Only one level of folders is supported',
    'api.selectFolderFirst': 'Please select a folder first',
    'changePassword.errorCurrentPassword': 'Current password is incorrect',
    'home.appName': 'Solo-Board',
    'home.defaultImportedName': 'imported',
  } as Record<string, string>,

  zh: {
    'sidebar.workspace': '工作台',
    'sidebar.profile': '个人管理',
    'sidebar.preferences': '个人偏好',
    'sidebar.logout': '登出',
    'sidebar.logoutSuccess': '已退出登录',
    'sidebar.logoutFailed': '登出失败',
    'mainLayout.openSidebar': '打开侧边栏',
    'mainLayout.sidebarTitle': '侧边栏',
    'mainLayout.toggleSidebar': '切换侧边栏',
    'mainLayout.sidebarShortcut': 'Ctrl+B',
    'login.title': 'Solo-Board 登录',
    'login.username': '用户名',
    'login.password': '密码',
    'login.placeholderUsername': '请输入用户名',
    'login.placeholderPassword': '请输入密码',
    'login.submit': '登录',
    'login.submitting': '登录中...',
    'login.errorAuth': '用户名或密码错误',
    'login.poweredByPrefix': 'powered by ',
    'login.poweredByLink': 'solo-board',
    'login.validationUsername': '请填写用户名',
    'login.validationPassword': '请填写密码',
    'changePassword.title': '修改密码',
    'changePassword.subtitle': '首次登录需要修改密码',
    'changePassword.currentPassword': '当前密码',
    'changePassword.newPassword': '新密码',
    'changePassword.confirmPassword': '确认新密码',
    'changePassword.placeholderCurrent': '请输入当前密码',
    'changePassword.placeholderNew': '至少 8 位，包含字母和数字',
    'changePassword.placeholderConfirm': '请再次输入新密码',
    'changePassword.submit': '修改密码',
    'changePassword.submitting': '修改中...',
    'changePassword.success': '密码修改成功',
    'changePassword.fail': '修改失败：请稍后重试',
    'changePassword.validationCurrent': '请填写当前密码',
    'changePassword.validationNew': '请填写新密码',
    'changePassword.validationNewLength': '新密码长度至少 8 位',
    'changePassword.validationNewFormat': '新密码必须包含字母和数字',
    'changePassword.validationConfirm': '请填写确认密码',
    'changePassword.validationMismatch': '确认密码与新密码不一致',
    'profile.title': '个人管理',
    'profile.personalInfo': '个人信息',
    'profile.viewAccount': '查看您的账户信息',
    'profile.username': '用户名',
    'profile.createdAt': '创建时间',
    'profile.lastLogin': '最后登录时间',
    'profile.changePassword': '修改密码',
    'profile.changePasswordDesc': '修改您的登录密码',
    'profile.currentPassword': '当前密码',
    'profile.newPassword': '新密码',
    'profile.confirmPassword': '确认新密码',
    'profile.placeholderCurrent': '请输入当前密码',
    'profile.placeholderNew': '至少 8 位，包含字母和数字',
    'profile.placeholderConfirm': '请再次输入新密码',
    'profile.submitPassword': '修改密码',
    'profile.submittingPassword': '修改中...',
    'profile.loadUserError': '加载用户信息失败',
    'profile.refreshHint': '请刷新页面重试',
    'profile.validationCurrent': '请填写当前密码',
    'profile.validationNew': '请填写新密码',
    'profile.validationNewLength': '新密码长度至少 8 位',
    'profile.validationNewFormat': '新密码必须包含字母和数字',
    'profile.validationConfirm': '请填写确认密码',
    'profile.validationMismatch': '确认密码与新密码不一致',
    'preferences.title': '个人偏好',
    'preferences.firstTimeHint': '请选择您的使用语言，之后可在个人偏好中修改。',
    'preferences.language': '语言',
    'preferences.languageDesc': '选择界面显示语言，默认英语。',
    'preferences.currentLanguage': '当前语言',
    'preferences.selectLanguage': '选择语言',
    'preferences.english': 'English',
    'preferences.chinese': '中文',
    'preferences.saved': '已保存语言偏好',
    'preferences.saveFailed': '保存偏好失败',
    'home.workspace': '工作台',
    'home.loading': '加载中...',
    'home.new': '新建',
    'home.newFolder': '新建文件夹',
    'home.newBoard': '新建画板',
    'home.name': '名称',
    'home.type': '类型',
    'home.modified': '修改时间',
    'home.actions': '操作',
    'home.open': '打开',
    'home.rename': '重命名',
    'home.move': '移动',
    'home.delete': '删除',
    'home.selectFolder': '选择目录',
    'home.noFiles': '当前目录下没有文件',
    'home.noFolderSelected': '请选择一个目录以查看文件',
    'home.createFolder': '新建文件夹',
    'home.createFile': '新建画板',
    'home.folderName': '文件夹名称',
    'home.fileName': '画板名称',
    'home.boardName': '画板名称',
    'home.placeholderFolderName': '请输入文件夹名称',
    'home.placeholderFileName': '请输入画板名称',
    'home.placeholderBoardName': '请输入画板名称',
    'home.placeholderName': '请输入名称',
    'home.targetFolder': '目标目录',
    'home.create': '创建',
    'home.cancel': '取消',
    'home.confirm': '确定',
    'home.renameFolder': '重命名文件夹',
    'home.renameFile': '重命名文件',
    'home.moveFolder': '移动文件夹',
    'home.moveFile': '移动文件',
    'home.deleteConfirm': '确认删除',
    'home.deleteFolderConfirm': '确定要删除文件夹 "{name}" 吗？此操作不可恢复。',
    'home.deleteFileConfirm': '确定要删除文件 "{name}" 吗？此操作不可恢复。',
    'home.createFolderDesc': '在根目录下创建新文件夹',
    'home.createFileDesc': '画板必须创建在某个目录中（不允许顶层）',
    'home.renameDesc': '请输入新的名称',
    'home.moveDesc': '选择目标目录',
    'home.moveFolderToRoot': '将文件夹移动到根目录（当前仅支持一级目录）',
    'home.folderActions': '文件夹操作',
    'home.validationFolderNameEmpty': '文件夹名称不能为空',
    'home.validationFileNameEmpty': '文件名不能为空',
    'home.validationSelectFolder': '请选择文件所在目录',
    'home.validationSelectTarget': '请选择目标目录',
    'home.loadFailed': '加载失败',
    'home.createSuccess': '创建成功',
    'home.createFailed': '创建失败',
    'home.deleteSuccess': '删除成功',
    'home.deleteFailed': '删除失败',
    'home.renameSuccess': '重命名成功',
    'home.renameFailed': '重命名失败',
    'home.moveSuccess': '移动成功',
    'home.moveFailed': '移动失败',
    'home.boardType': '画板',
    'home.byCreator': '作者：{creator}',
    'home.optionSelectFolder': '请选择目录',
    'home.import': '导入',
    'home.importDesc': '将 .excalidraw 文件导入当前文件夹',
    'home.importSuccess': '导入成功',
    'home.importFailed': '导入失败',
    'home.importInvalidFile': '请选择有效的 .excalidraw 文件',
    'home.importSelectFolder': '请先选择文件夹',
    'home.justNow': '刚刚',
    'home.minuteAgo': '1 分钟前',
    'home.minutesAgo': '{n} 分钟前',
    'home.hourAgo': '1 小时前',
    'home.hoursAgo': '{n} 小时前',
    'home.dayAgo': '1 天前',
    'home.daysAgo': '{n} 天前',
    'home.monthAgo': '1 个月前',
    'home.monthsAgo': '{n} 个月前',
    'home.yearAgo': '1 年前',
    'home.yearsAgo': '{n} 年前',
    'editor.back': '返回',
    'editor.save': '保存',
    'editor.saving': '保存中...',
    'editor.autoSaving': '自动保存中...',
    'editor.unsaved': '未保存',
    'editor.savedAt': '已保存（{time}）',
    'editor.fileNotFound': '文件不存在',
    'editor.loadFailed': '加载失败',
    'editor.saveSuccess': '保存成功',
    'editor.saveFailed': '保存失败',
    'editor.autoSaveFailed': '自动保存失败',
    'editor.leaveTitle': '确认离开',
    'editor.leaveMessage': '有未保存的更改，确定要离开吗？',
    'editor.leave': '离开',
    'editor.noChanges': '当前已保存',
    'editor.untitled': '未命名',
    'editor.loading': '加载中...',
    'editor.otherBoards': '同文件夹其他画板',
    'editor.noOtherBoards': '此文件夹中没有其他画板',
    'errorBoundary.title': '出现错误',
    'errorBoundary.description': '页面渲染时发生了错误',
    'errorBoundary.hint': '抱歉，页面加载时出现了问题。请尝试刷新页面或返回上一页。',
    'errorBoundary.retry': '重试',
    'errorBoundary.backHome': '返回工作台',
    'api.networkError': '网络连接失败，请稍后重试',
    'api.unauthorized': '未登录或登录已过期',
    'api.badRequest': '请求参数错误',
    'api.forbidden': '权限不足',
    'api.notFound': '资源不存在',
    'api.serverError': '服务器错误，请稍后重试',
    'api.requestFailed': '请求失败，请稍后重试',
    'api.conflictFolder': '同目录下已存在同名文件夹',
    'api.conflictFile': '同目录下已存在同名文件',
    'api.folderNotEmpty': '文件夹不为空，无法删除',
    'api.folderNameEmpty': '文件夹名称不能为空',
    'api.fileNameEmpty': '文件名不能为空',
    'api.oneLevelOnly': '仅支持一级目录',
    'api.selectFolderFirst': '请先选择目录',
    'changePassword.errorCurrentPassword': '当前密码错误',
    'home.appName': 'Solo-Board',
    'home.defaultImportedName': '导入',
  } as Record<string, string>,
};

export type Locale = 'en' | 'zh';

export function getMessage(locale: Locale, key: string, params?: Record<string, string>): string {
  const msg = messages[locale][key] ?? messages.en[key] ?? key;
  if (!params) return msg;
  return Object.entries(params).reduce((s, [k, v]) => s.replace(new RegExp(`\\{${k}\\}`, 'g'), v), msg);
}
